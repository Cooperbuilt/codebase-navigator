# Team Conventions

> This file is auto-generated by `/setup` and can be manually edited.
> It describes how the team works so the plugin navigates code like an insider.

## Branching

- **Strategy:** GitHub Flow. Feature branches off `main`, squash-merge PRs.
- **Branch naming:** `feat/description`, `fix/description`, `chore/description`
- **Release process:** Merge to `main` triggers CI/CD. No release branches.

## Code Style

- **TypeScript:** ESLint + Prettier. Strict mode enabled. No `any` allowed.
- **Python:** Ruff for linting + formatting. Type hints required on public functions. Pydantic for data models.
- **Terraform:** `terraform fmt` enforced in CI. Modules in `modules/`, environments in `environments/`.

## Configuration

- **Environment variables:** Defined in `.env.example` per repo. Actual values in AWS Secrets Manager, injected at deploy time.
- **Feature flags:** LaunchDarkly. Flag keys follow `team.feature-name` convention. Checked via `is_feature_enabled()` helper in shared-lib.
- **Per-environment config:** Terraform variables in `environments/{env}.tfvars`. Application config in SSM Parameter Store under `/app/{service}/{env}/`.

## Testing

- **Unit tests:** Co-located with source (`__tests__/` directories in TS, `tests/` in Python).
- **Integration tests:** In `integration-tests/` at repo root. Run against localstack in CI.
- **E2E tests:** Separate repo `e2e-tests`, runs against staging nightly.

## Deployment

- **CI/CD:** GitHub Actions. Workflow files in `.github/workflows/`.
- **Pipeline:** lint → test → build → deploy-staging → smoke-test → deploy-prod (manual approval gate).
- **Rollback:** Revert the PR and re-deploy. Lambda versioning with aliases for instant rollback.

## Monitoring

- **Logging:** Structured JSON to CloudWatch. All log entries include `correlationId`.
- **Metrics:** CloudWatch custom metrics for business KPIs. Infrastructure metrics via default CloudWatch.
- **Alerting:** CloudWatch Alarms → SNS → PagerDuty for critical. Slack for warnings.
